{"ast":null,"code":"export default class TileResolver {\n  constructor(matrix) {\n    let tileSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 16;\n    this.matrix = matrix;\n    this.tileSize = tileSize;\n  }\n  toIndex(pos) {\n    return Math.floor(pos / this.tileSize);\n  }\n  toIndexRange(pos1, pos2) {\n    const pMax = Math.ceil(pos2 / this.tileSize) * this.tileSize;\n    const range = [];\n    let pos = pos1;\n    do {\n      range.push(this.toIndex(pos));\n      pos += this.tileSize;\n    } while (pos < pMax);\n    return range;\n  }\n  getByIndex(indexX, indexY) {\n    const tile = this.matrix.get(indexX, indexY);\n    if (tile) {\n      const x1 = indexX * this.tileSize;\n      const x2 = x1 + this.tileSize;\n      const y1 = indexY * this.tileSize;\n      const y2 = y1 + this.tileSize;\n      return {\n        tile,\n        x1,\n        x2,\n        y1,\n        y2\n      };\n    }\n  }\n  searchByPosition(posX, posY) {\n    return this.getByIndex(this.toIndex(posX), this.toIndex(posY));\n  }\n  searchByRange(x1, x2, y1, y2) {\n    const matches = [];\n    this.toIndexRange(x1, x2).forEach(indexX => {\n      this.toIndexRange(y1, y2).forEach(indexY => {\n        const match = this.getByIndex(indexX, indexY);\n        if (match) {\n          matches.push(match);\n        }\n      });\n    });\n    return matches;\n  }\n}","map":{"version":3,"names":["TileResolver","constructor","matrix","tileSize","toIndex","pos","Math","floor","toIndexRange","pos1","pos2","pMax","ceil","range","push","getByIndex","indexX","indexY","tile","get","x1","x2","y1","y2","searchByPosition","posX","posY","searchByRange","matches","forEach","match"],"sources":["/home/kaiyang7766/Desktop/portfolio/src/js/TileResolver.js"],"sourcesContent":["export default class TileResolver{\n\tconstructor(matrix,tileSize=16){\n\t\tthis.matrix=matrix;\n\t\tthis.tileSize=tileSize;\n\t}\n\n\ttoIndex(pos){\n\t\treturn Math.floor(pos / this.tileSize);\n\t}\n\n\ttoIndexRange(pos1,pos2){\n\t\tconst pMax=Math.ceil(pos2/this.tileSize)*this.tileSize;\n\t\tconst range=[];\n\t\tlet pos = pos1;\n\t\tdo {\n\t\t\trange.push(this.toIndex(pos));\n\t\t\tpos+=this.tileSize;\n\t\t} while (pos<pMax);\n\t\treturn range;\n\t}\n\n\tgetByIndex(indexX,indexY){\n\t\tconst tile=this.matrix.get(indexX,indexY);\n\t\tif (tile){\n\t\t\tconst x1=indexX*this.tileSize;\n\t\t\tconst x2=x1+this.tileSize;\n\t\t\tconst y1=indexY*this.tileSize;\n\t\t\tconst y2=y1+this.tileSize;\n\t\t\treturn {\n\t\t\t\ttile,\n\t\t\t\tx1,\n\t\t\t\tx2,\n\t\t\t\ty1,\n\t\t\t\ty2,\n\t\t\t};\n\t\t}\n\t}\n\n\tsearchByPosition(posX,posY){\n\t\treturn this.getByIndex(\n\t\t\tthis.toIndex(posX),\n\t\t\tthis.toIndex(posY));\n\t}\n\n\tsearchByRange(x1,x2,y1,y2){\n\t\tconst matches=[];\n\t\tthis.toIndexRange(x1,x2).forEach(indexX=>{\n\t\t\tthis.toIndexRange(y1,y2).forEach(indexY=>{\n\t\t\t\tconst match=this.getByIndex(indexX,indexY);\n\t\t\t\tif (match){\n\t\t\t\t\tmatches.push(match);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\treturn matches;\n\t}\n}"],"mappings":"AAAA,eAAe,MAAMA,YAAY;EAChCC,WAAW,CAACC,MAAM,EAAa;IAAA,IAAZC,QAAQ,uEAAC,EAAE;IAC7B,IAAI,CAACD,MAAM,GAACA,MAAM;IAClB,IAAI,CAACC,QAAQ,GAACA,QAAQ;EACvB;EAEAC,OAAO,CAACC,GAAG,EAAC;IACX,OAAOC,IAAI,CAACC,KAAK,CAACF,GAAG,GAAG,IAAI,CAACF,QAAQ,CAAC;EACvC;EAEAK,YAAY,CAACC,IAAI,EAACC,IAAI,EAAC;IACtB,MAAMC,IAAI,GAACL,IAAI,CAACM,IAAI,CAACF,IAAI,GAAC,IAAI,CAACP,QAAQ,CAAC,GAAC,IAAI,CAACA,QAAQ;IACtD,MAAMU,KAAK,GAAC,EAAE;IACd,IAAIR,GAAG,GAAGI,IAAI;IACd,GAAG;MACFI,KAAK,CAACC,IAAI,CAAC,IAAI,CAACV,OAAO,CAACC,GAAG,CAAC,CAAC;MAC7BA,GAAG,IAAE,IAAI,CAACF,QAAQ;IACnB,CAAC,QAAQE,GAAG,GAACM,IAAI;IACjB,OAAOE,KAAK;EACb;EAEAE,UAAU,CAACC,MAAM,EAACC,MAAM,EAAC;IACxB,MAAMC,IAAI,GAAC,IAAI,CAAChB,MAAM,CAACiB,GAAG,CAACH,MAAM,EAACC,MAAM,CAAC;IACzC,IAAIC,IAAI,EAAC;MACR,MAAME,EAAE,GAACJ,MAAM,GAAC,IAAI,CAACb,QAAQ;MAC7B,MAAMkB,EAAE,GAACD,EAAE,GAAC,IAAI,CAACjB,QAAQ;MACzB,MAAMmB,EAAE,GAACL,MAAM,GAAC,IAAI,CAACd,QAAQ;MAC7B,MAAMoB,EAAE,GAACD,EAAE,GAAC,IAAI,CAACnB,QAAQ;MACzB,OAAO;QACNe,IAAI;QACJE,EAAE;QACFC,EAAE;QACFC,EAAE;QACFC;MACD,CAAC;IACF;EACD;EAEAC,gBAAgB,CAACC,IAAI,EAACC,IAAI,EAAC;IAC1B,OAAO,IAAI,CAACX,UAAU,CACrB,IAAI,CAACX,OAAO,CAACqB,IAAI,CAAC,EAClB,IAAI,CAACrB,OAAO,CAACsB,IAAI,CAAC,CAAC;EACrB;EAEAC,aAAa,CAACP,EAAE,EAACC,EAAE,EAACC,EAAE,EAACC,EAAE,EAAC;IACzB,MAAMK,OAAO,GAAC,EAAE;IAChB,IAAI,CAACpB,YAAY,CAACY,EAAE,EAACC,EAAE,CAAC,CAACQ,OAAO,CAACb,MAAM,IAAE;MACxC,IAAI,CAACR,YAAY,CAACc,EAAE,EAACC,EAAE,CAAC,CAACM,OAAO,CAACZ,MAAM,IAAE;QACxC,MAAMa,KAAK,GAAC,IAAI,CAACf,UAAU,CAACC,MAAM,EAACC,MAAM,CAAC;QAC1C,IAAIa,KAAK,EAAC;UACTF,OAAO,CAACd,IAAI,CAACgB,KAAK,CAAC;QACpB;MACD,CAAC,CAAC;IACH,CAAC,CAAC;IACF,OAAOF,OAAO;EACf;AACD"},"metadata":{},"sourceType":"module","externalDependencies":[]}