{"ast":null,"code":"import SpriteSheet from './SpriteSheet.js';\nimport { createAnim } from './anim.js';\nexport function loadImage(url) {\n  return new Promise(resolve => {\n    const image = new Image();\n    image.addEventListener('load', () => {\n      resolve(image);\n    });\n    image.src = url;\n  });\n}\nexport function loadJSON(url) {\n  return fetch(url).then(r => r.json());\n}\nexport function loadSpriteSheet(name) {\n  return loadJSON(`./sprites/${name}.json`).then(sheetSpec => Promise.all([sheetSpec, loadImage(sheetSpec.imageURL)])).then(_ref => {\n    let [sheetSpec, image] = _ref;\n    const sprites = new SpriteSheet(image, sheetSpec.tileW, sheetSpec.tileH); //size\n\n    if (sheetSpec.tiles) {\n      sheetSpec.tiles.forEach(tileSpec => {\n        sprites.defineTile(tileSpec.name, tileSpec.index[0], tileSpec.index[1]);\n      });\n    }\n    if (sheetSpec.frames) {\n      sheetSpec.frames.forEach(frameSpec => {\n        sprites.define(frameSpec.name, ...frameSpec.rect);\n      });\n    }\n    if (sheetSpec.animations) {\n      sheetSpec.animations.forEach(animSpec => {\n        const animation = createAnim(animSpec.frames, animSpec.frameLen);\n        sprites.defineAnim(animSpec.name, animation);\n      });\n    }\n    return sprites;\n  });\n}","map":{"version":3,"names":["SpriteSheet","createAnim","loadImage","url","Promise","resolve","image","Image","addEventListener","src","loadJSON","fetch","then","r","json","loadSpriteSheet","name","sheetSpec","all","imageURL","sprites","tileW","tileH","tiles","forEach","tileSpec","defineTile","index","frames","frameSpec","define","rect","animations","animSpec","animation","frameLen","defineAnim"],"sources":["/home/kaiyang7766/Desktop/portfolio/src/js/loaders.js"],"sourcesContent":["import SpriteSheet from './SpriteSheet.js';\nimport {createAnim} from './anim.js';\n\nexport function loadImage(url) {\n\treturn new Promise(resolve => {\n\t\tconst image = new Image();\n\t\timage.addEventListener('load', () => {\n\t\t\tresolve(image);\n\t\t});\n\t\timage.src = url;\n\t});\n}\n\nexport function loadJSON(url){\n\treturn fetch(url)\n\t.then(r=>r.json());\n}\n\nexport function loadSpriteSheet(name){\n\treturn loadJSON(`./sprites/${name}.json`)\n\t.then(sheetSpec=> Promise.all([\n\t\tsheetSpec,\n\t\tloadImage(sheetSpec.imageURL),\n\t]))\n\t.then(([sheetSpec,image])=>{\n\t\tconst sprites=new SpriteSheet(\n\t\timage,\n\t\tsheetSpec.tileW,\n\t\tsheetSpec.tileH); //size\n\n\t\tif (sheetSpec.tiles){\n\t\t\tsheetSpec.tiles.forEach(tileSpec=>{\n\t\t\t\tsprites.defineTile(\n\t\t\t\t\ttileSpec.name,\n\t\t\t\t\ttileSpec.index[0],\n\t\t\t\t\ttileSpec.index[1]);\n\t\t\t});\n\t\t}\n\n\t\tif (sheetSpec.frames){\n\t\t\tsheetSpec.frames.forEach(frameSpec=>{\n\t\t\t\tsprites.define(frameSpec.name, ...frameSpec.rect);\n\t\t\t});\n\t\t}\n\n\t\tif (sheetSpec.animations){\n\t\t\tsheetSpec.animations.forEach(animSpec=>{\n\t\t\t\tconst animation=createAnim(animSpec.frames,animSpec.frameLen);\n\t\t\t\tsprites.defineAnim(animSpec.name,animation);\n\t\t\t});\n\t\t}\n\n\t\treturn sprites;\n\t});\n}\n\n"],"mappings":"AAAA,OAAOA,WAAW,MAAM,kBAAkB;AAC1C,SAAQC,UAAU,QAAO,WAAW;AAEpC,OAAO,SAASC,SAAS,CAACC,GAAG,EAAE;EAC9B,OAAO,IAAIC,OAAO,CAACC,OAAO,IAAI;IAC7B,MAAMC,KAAK,GAAG,IAAIC,KAAK,EAAE;IACzBD,KAAK,CAACE,gBAAgB,CAAC,MAAM,EAAE,MAAM;MACpCH,OAAO,CAACC,KAAK,CAAC;IACf,CAAC,CAAC;IACFA,KAAK,CAACG,GAAG,GAAGN,GAAG;EAChB,CAAC,CAAC;AACH;AAEA,OAAO,SAASO,QAAQ,CAACP,GAAG,EAAC;EAC5B,OAAOQ,KAAK,CAACR,GAAG,CAAC,CAChBS,IAAI,CAACC,CAAC,IAAEA,CAAC,CAACC,IAAI,EAAE,CAAC;AACnB;AAEA,OAAO,SAASC,eAAe,CAACC,IAAI,EAAC;EACpC,OAAON,QAAQ,CAAE,aAAYM,IAAK,OAAM,CAAC,CACxCJ,IAAI,CAACK,SAAS,IAAGb,OAAO,CAACc,GAAG,CAAC,CAC7BD,SAAS,EACTf,SAAS,CAACe,SAAS,CAACE,QAAQ,CAAC,CAC7B,CAAC,CAAC,CACFP,IAAI,CAAC,QAAqB;IAAA,IAApB,CAACK,SAAS,EAACX,KAAK,CAAC;IACvB,MAAMc,OAAO,GAAC,IAAIpB,WAAW,CAC7BM,KAAK,EACLW,SAAS,CAACI,KAAK,EACfJ,SAAS,CAACK,KAAK,CAAC,CAAC,CAAC;;IAElB,IAAIL,SAAS,CAACM,KAAK,EAAC;MACnBN,SAAS,CAACM,KAAK,CAACC,OAAO,CAACC,QAAQ,IAAE;QACjCL,OAAO,CAACM,UAAU,CACjBD,QAAQ,CAACT,IAAI,EACbS,QAAQ,CAACE,KAAK,CAAC,CAAC,CAAC,EACjBF,QAAQ,CAACE,KAAK,CAAC,CAAC,CAAC,CAAC;MACpB,CAAC,CAAC;IACH;IAEA,IAAIV,SAAS,CAACW,MAAM,EAAC;MACpBX,SAAS,CAACW,MAAM,CAACJ,OAAO,CAACK,SAAS,IAAE;QACnCT,OAAO,CAACU,MAAM,CAACD,SAAS,CAACb,IAAI,EAAE,GAAGa,SAAS,CAACE,IAAI,CAAC;MAClD,CAAC,CAAC;IACH;IAEA,IAAId,SAAS,CAACe,UAAU,EAAC;MACxBf,SAAS,CAACe,UAAU,CAACR,OAAO,CAACS,QAAQ,IAAE;QACtC,MAAMC,SAAS,GAACjC,UAAU,CAACgC,QAAQ,CAACL,MAAM,EAACK,QAAQ,CAACE,QAAQ,CAAC;QAC7Df,OAAO,CAACgB,UAAU,CAACH,QAAQ,CAACjB,IAAI,EAACkB,SAAS,CAAC;MAC5C,CAAC,CAAC;IACH;IAEA,OAAOd,OAAO;EACf,CAAC,CAAC;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}